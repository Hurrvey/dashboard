.dashboard {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background-color: #212121;
  padding: clamp(16px, 2vh, 24px) clamp(20px, 3vw, 36px);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;

  .dashboard-inner {
    flex: 1 1 auto;
    display: grid;
    grid-template-rows: auto minmax(0, 0.9fr) minmax(0, 1.1fr);
    gap: clamp(16px, 2vh, 24px);
    min-height: 0;
  }

  .dashboard-header {
    background: #2a2a2a;
    border-radius: 14px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: clamp(12px, 1.8vh, 20px) clamp(22px, 3.8vw, 44px);
    text-align: center;

    h1 {
      font-family: 'vcr-osd', monospace;
      font-size: clamp(3.5rem, 3vw, 2.7rem);
      color: #de335e;
      letter-spacing: 2px;
      text-shadow: px 4px 0 rgba(0, 0, 0, 0.24);
      margin-bottom: 5px;
    }

    .meta {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: clamp(14px, 2.2vw, 32px);
      font-size: clamp(0.95rem, 1.45vw, 1.2rem);
      color: #aaa;

      span {
        font-family: 'Pixel', sans-serif;

        &.time {
          color: #4caf50;
          font-family: 'vcr-osd', monospace;
        }
      }
    }
  }

  .top-section {
    position: relative;
    min-height: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: clamp(18px, 2vh, 28px);
    

    .chart-row {
      display: grid;
      gap: clamp(16px, 2vh, 24px);
      min-height: 0;
      flex: 1 1 0;
      height: 0;
      
    }

    .chart-row--distribution {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      grid-auto-rows: minmax(0, 1fr);
      flex: 0 0 clamp(540px, 28vh, 600px);
      height: auto;
    }

    .chart-row--ratio {
      grid-template-columns: repeat(3, minmax(0, 1fr));
      grid-auto-rows: minmax(0, 1fr);
      align-items: stretch;
      flex: 1 1 0;
    }

    .chart-item {
      display: grid;
      grid-template-rows: auto minmax(0, 1fr);
      gap: clamp(10px, 1.4vh, 14px);
      padding: clamp(10px, 1.2vh, 16px);
      border-radius: 12px;
      background: transparent;
      border: none;
      box-shadow: none;
      min-width: 0;
      min-height: 0;
      height: 100%;
      background-color: #2a2a2a;
    }

    .chart-item--pie {
      min-height: 0;
      align-content: stretch;
    }

    .chart-header {
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 12px;
      padding: clamp(4px, 0.6vh, 6px) 0;
    }

    .chart-title {
      font-size: clamp(1rem, 1.9vw, 3rem);
      color: #fff;
      font-family: 'Pixel', sans-serif;
      margin: 0;
      line-height: 1.2;
    }

    .chart-body {
      display: flex;
      flex: 1 1 0;
      height: 100%;
      min-width: 0;
      min-height: 0;
      border-radius: 8px;
      background: transparent;
      padding: clamp(8px, 1vh, 12px);
    }

    .chart-body--bar {
      align-items: stretch;
      justify-content: stretch;

      > * {
        flex: 1 1 auto;
        width: 100%;
        height: 100%;
        min-width: 0;
        min-height: 0;
        
      }
    }

    .chart-body--pie {
      align-items: center;
      justify-content: center;
      padding: clamp(6px, 0.9vh, 12px);

      > * {
        flex: 1 1 auto;
        width: 100%;
        height: 100%;
        max-width: 100%;
        max-height: 100%;
      }

      svg {
        width: 100%;
        height: 100%;
      }

      svg .legend {
        transform-origin: top right;
        transform: translate(4%, -6%) scale(1.7);
      }

      svg .legend text {
        font-size: clamp(1.6rem, 2.2vw, 2.6rem) !important;
        font-family: 'Pixel', sans-serif;
        dominant-baseline: middle;
      }

      svg .legend rect,
      svg .legend circle,
      svg .legend path {
        transform-origin: center;
        transform: scale(1.7);
        stroke-width: 2.6;
      }
    }

    .chart-item--pie .chart-body {
      width: 100%;
      position: relative;
      padding-top: 85%;
      margin: 0 auto;
      display: block;
    }

    .chart-item--pie .chart-body > * {
      position: absolute;
      inset: clamp(2px, 0.4vh, 8px);
      width: auto;
      height: auto;
    }
  }

  .bottom-section {
    background: transparent;
    border-radius: 14px;
    box-shadow: none;
    border: none;
    padding: 0;
    min-height: 0;
    display: flex;
    flex-direction: column;
    gap: clamp(12px, 1.4vh, 16px);

    > * {
      flex: 1 1 auto;
      min-height: 0;
    }
  }

  .dashboard-overlay {
    position: absolute;
    inset: 0;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 40px 20px;
    gap: 16px;
    background: rgba(20, 20, 20, 0.92);

    .primary {
      font-size: clamp(1.1rem, 2vw, 1.4rem);
      color: #fff;
      font-family: 'Pixel', sans-serif;
    }

    .secondary {
      font-size: clamp(0.95rem, 1.6vw, 1.1rem);
      color: #bbb;
      max-width: 520px;
      line-height: 1.6;
    }

    button {
      margin-top: 12px;
      padding: 10px 24px;
      background: #de335e;
      border: none;
      color: #fff;
      font-size: clamp(0.95rem, 1.6vw, 1.15rem);
      font-family: 'Pixel', sans-serif;
      cursor: pointer;
      border-radius: 4px;
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.4);
      transition: transform 0.2s ease, box-shadow 0.2s ease;

      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 0 rgba(0, 0, 0, 0.4);
      }

      &:active {
        transform: translateY(0);
        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.4);
      }
    }

    h2 {
      color: #fff;
      font-size: clamp(1.4rem, 2.8vw, 1.8rem);
      font-family: 'vcr-osd', monospace;
    }

    p {
      color: #ddd;
    }
  }

  .dashboard-overlay.error-state {
    background: rgba(45, 16, 26, 0.92);
  }

  .pixel-spinner {
    width: 52px;
    height: 52px;
    border: 5px solid rgba(255, 255, 255, 0.1);
    border-top-color: #de335e;
    border-radius: 50%;
    animation: dashboard-spin 1.1s linear infinite;
  }
}

@keyframes dashboard-spin {
  to {
    transform: rotate(360deg);
  }
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.25s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

@media (max-width: 1480px) {
  .dashboard {
    padding: clamp(12px, 1.6vh, 20px) clamp(16px, 2.5vw, 28px);

    .dashboard-inner {
      grid-template-rows: auto minmax(0, 0.95fr) minmax(0, 1.05fr);
    }

    .top-section .chart-row {
      gap: clamp(14px, 1.6vh, 20px);
    }
  }
}

@media (max-width: 1220px) {
  .dashboard {
    .top-section {
      .chart-row--distribution {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .chart-row--ratio {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
  }
}

@media (max-width: 980px) {
  .dashboard {
    padding: clamp(10px, 1.5vh, 16px) clamp(12px, 2.4vw, 20px);

    .dashboard-inner {
      grid-template-rows: minmax(100px, 14vh) 1fr minmax(160px, 28vh);
    }

    .dashboard-header {
      h1 {
        font-size: clamp(1.8rem, 5vw, 2.3rem);
      }

      .meta {
        font-size: clamp(0.9rem, 2.6vw, 1.1rem);
        gap: clamp(10px, 2.4vw, 18px);
      }
    }

    .top-section {
      .chart-row {
        gap: clamp(12px, 1.4vh, 16px);
      }

      .chart-row--distribution {
        grid-template-columns: 1fr;
      }

      .chart-row--ratio {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .bottom-section {
      padding: clamp(12px, 1.4vh, 18px) clamp(14px, 1.6vw, 20px);
    }
  }
}

@media (max-width: 720px) {
  .dashboard {
    .top-section {
      .chart-row--ratio {
        grid-template-columns: 1fr;
      }
    }
  }
}

